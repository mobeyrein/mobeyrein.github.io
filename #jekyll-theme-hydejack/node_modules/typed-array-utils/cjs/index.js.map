{"version":3,"file":"index.js","sourceRoot":"","sources":["../index.ts"],"names":[],"mappings":"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","sourcesContent":["// Buffer Source Conversion\n// ------------------------\n\nexport const bufferSourceToUint8Array = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new Uint8Array(bs)\n  : new Uint8Array(bs.buffer, bs.byteOffset, bs.byteLength);\n\nexport const bufferSourceToDataView = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new DataView(bs)\n  : new DataView(bs.buffer, bs.byteOffset, bs.byteLength);\n\nconst bs2u8 = bufferSourceToUint8Array;\nconst bs2dv = bufferSourceToDataView;\n\n\n// Hex Functions\n// -------------\n\nexport const byteToHex = (byte: number) => byte.toString(16).padStart(2, '0');\nexport const hexToByte = (hexOctet: string) => parseInt(hexOctet, 16);\n\nexport const hexStringToBytes = (hexString: string) => new Uint8Array(hexString.match(/[0-9a-f]{1,2}/ig).map(hexToByte));\nexport const bytesToHexString = (bufferSource: BufferSource) => Array.from(bs2u8(bufferSource), byte => byteToHex(byte)).join('');\n\nexport const bytesToHexArray = (bufferSource: BufferSource) => Array.from(bs2u8(bufferSource), byte => byteToHex(byte));\n\n\n// Concatenation\n// -------------\n\nexport function concatUint8Arrays(...uint8Arrays: Uint8Array[]) {\n  const size = uint8Arrays.reduce((size, u8) => size + u8.length, 0);\n  const res = new Uint8Array(size);\n  let i = 0;\n  for (const u8 of uint8Arrays) {\n    res.set(u8, i);\n    i += u8.length;\n  }\n  return res;\n}\n\nexport function concatBufferSources(...bufferSources: BufferSource[]) {\n  return concatUint8Arrays(...bufferSources.map(bs2u8));\n}\n\n// Splitting\n// ---------\n\nexport function splitUint8Array(uint8Array: Uint8Array, ...indices: number[]) {\n  const result: Uint8Array[] = new Array(indices.length + 1);\n  let prev = 0;\n  let i = 0;\n  for (const index of indices) {\n    result[i++] = uint8Array.subarray(prev, index);\n    prev = index;\n  }\n  result[i] = uint8Array.subarray(prev);\n  return result;\n}\n\nexport function splitBufferSource(bufferSource: BufferSource, ...indices: number[]) {\n  return splitUint8Array(bs2u8(bufferSource), ...indices);\n}\n\n\n// Comparison\n// ----------\n\nexport function compareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  let res = true;\n  for (const u8_i of u8s) {\n    for (let i = 0; i !== u8_1.length; i++) {\n      const r = u8_1[i] === u8_i[i];\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nfunction compareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some(dv_i => dv_1.byteLength !== dv_i.byteLength)) return false;\n  let res = true;\n  for (const dv_i of dvs) {\n    for (let i = 0; i !== dv_1.byteLength; i += 4) {\n      const r = dv_1.getUint32(i) === dv_i.getUint32(i);\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nexport function compareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return compareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n\nexport function unsafeCompareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  return u8s.every(u8_i => {\n    for (let i = 0; i !== u8_1.length; i++) if (u8_1[i] !== u8_i[i]) return false;\n    return true;\n  });\n}\n\nfunction unsafeCompareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some((dv_i) => dv_1.byteLength !== dv_i.byteLength)) return false;\n  return dvs.every(dv_i => {\n    for (let i = 0; i !== dv_i.byteLength; i += 4) {\n      if (dv_1.getUint32(i) !== dv_i.getUint32(i)) {\n        return false;\n      }\n    }\n    return true;\n  });\n}\n\nexport function unsafeCompareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return unsafeCompareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n"]}