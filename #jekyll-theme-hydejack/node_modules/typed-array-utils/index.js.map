{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["// Buffer Source Conversion\n// ------------------------\n\nexport const bufferSourceToUint8Array = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new Uint8Array(bs)\n  : new Uint8Array(bs.buffer, bs.byteOffset, bs.byteLength);\n\nexport const bufferSourceToDataView = (bs: BufferSource) => bs instanceof ArrayBuffer\n  ? new DataView(bs)\n  : new DataView(bs.buffer, bs.byteOffset, bs.byteLength);\n\nconst bs2u8 = bufferSourceToUint8Array;\nconst bs2dv = bufferSourceToDataView;\n\n\n// Hex Functions\n// -------------\n\nexport const byteToHex = (byte: number) => byte.toString(16).padStart(2, '0');\nexport const hexToByte = (hexOctet: string) => parseInt(hexOctet, 16);\n\nexport const hexStringToBytes = (hexString: string) => new Uint8Array(hexString.match(/[0-9a-f]{1,2}/ig).map(hexToByte));\nexport const bytesToHexString = (bufferSource: BufferSource) => Array.from(bs2u8(bufferSource), byte => byteToHex(byte)).join('');\n\nexport const bytesToHexArray = (bufferSource: BufferSource) => Array.from(bs2u8(bufferSource), byte => byteToHex(byte));\n\n\n// Concatenation\n// -------------\n\nexport function concatUint8Arrays(...uint8Arrays: Uint8Array[]) {\n  const size = uint8Arrays.reduce((size, u8) => size + u8.length, 0);\n  const res = new Uint8Array(size);\n  let i = 0;\n  for (const u8 of uint8Arrays) {\n    res.set(u8, i);\n    i += u8.length;\n  }\n  return res;\n}\n\nexport function concatBufferSources(...bufferSources: BufferSource[]) {\n  return concatUint8Arrays(...bufferSources.map(bs2u8));\n}\n\n// Splitting\n// ---------\n\nexport function splitUint8Array(uint8Array: Uint8Array, ...indices: number[]) {\n  const result: Uint8Array[] = new Array(indices.length + 1);\n  let prev = 0;\n  let i = 0;\n  for (const index of indices) {\n    result[i++] = uint8Array.subarray(prev, index);\n    prev = index;\n  }\n  result[i] = uint8Array.subarray(prev);\n  return result;\n}\n\nexport function splitBufferSource(bufferSource: BufferSource, ...indices: number[]) {\n  return splitUint8Array(bs2u8(bufferSource), ...indices);\n}\n\n\n// Comparison\n// ----------\n\nexport function compareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  let res = true;\n  for (const u8_i of u8s) {\n    for (let i = 0; i !== u8_1.length; i++) {\n      const r = u8_1[i] === u8_i[i];\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nfunction compareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some(dv_i => dv_1.byteLength !== dv_i.byteLength)) return false;\n  let res = true;\n  for (const dv_i of dvs) {\n    for (let i = 0; i !== dv_1.byteLength; i += 4) {\n      const r = dv_1.getUint32(i) === dv_i.getUint32(i);\n      res = r && res;\n    }\n  }\n  return res;\n}\n\nexport function compareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return compareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n\nexport function unsafeCompareUint8Arrays(u8_1: Uint8Array, ...u8s: Uint8Array[]) {\n  if (u8s.some(u8_i => u8_1.byteLength !== u8_i.byteLength)) return false;\n  return u8s.every(u8_i => {\n    for (let i = 0; i !== u8_1.length; i++) if (u8_1[i] !== u8_i[i]) return false;\n    return true;\n  });\n}\n\nfunction unsafeCompareDataViewsUint32(dv_1: DataView, ...dvs: DataView[]) {\n  if (dvs.some((dv_i) => dv_1.byteLength !== dv_i.byteLength)) return false;\n  return dvs.every(dv_i => {\n    for (let i = 0; i !== dv_i.byteLength; i += 4) {\n      if (dv_1.getUint32(i) !== dv_i.getUint32(i)) {\n        return false;\n      }\n    }\n    return true;\n  });\n}\n\nexport function unsafeCompareBufferSources(bufferSource: BufferSource, ...bufferSources: BufferSource[]) {\n  return unsafeCompareDataViewsUint32(bs2dv(bufferSource), ...bufferSources.map(bs2dv));\n}\n"]}